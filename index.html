<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="baidu-site-verification" content="codeva-jpGfkuw9an" />
    <meta name="msvalidate.01" content="EBB4F288DE9A362B19A8EB1D152EE9D2" />
    <!-- 谷歌广告 -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6024036052674886"
     crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HT9LYL16V9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-HT9LYL16V9');
    </script>
    <!-- 阿里云Appflow Chat SDK -->
    <script src="https://o.alicdn.com/appflow/chatbot/v1/AppflowChatSDK.js" 
            onerror="console.error('阿里云Appflow Chat SDK加载失败')"></script>
    <script>
      console.log('阿里云Appflow Chat SDK脚本标签已添加');
      
      // 检查SDK是否加载成功
      setTimeout(() => {
        if (typeof window.APPFLOW_CHAT_SDK === 'undefined') {
          console.error('阿里云Appflow Chat SDK未正确加载，请检查网络连接或脚本地址');
        } else {
          console.log('APPFLOW_CHAT_SDK已加载，准备初始化');
          console.log('APPFLOW_CHAT_SDK对象结构:', Object.keys(window.APPFLOW_CHAT_SDK));
        }
      }, 3000);
      
      // 确保在SDK加载完成后初始化
      function initChatSDK() {
        console.log('检查APPFLOW_CHAT_SDK是否存在:', typeof window.APPFLOW_CHAT_SDK !== 'undefined');
        
        if (window.APPFLOW_CHAT_SDK) {
          console.log('开始初始化阿里云Appflow Chat SDK');
          console.log('APPFLOW_CHAT_SDK对象:', window.APPFLOW_CHAT_SDK);
          
          try {
            // 先设置用户信息（如果需要）
            if (window.APPFLOW_CHAT_SDK.setUser) {
              window.APPFLOW_CHAT_SDK.setUser({
                userId: 'anonymous',
                userName: 'Anonymous User'
              });
              console.log('已设置用户信息');
            }
            
            // 初始化SDK
            if (window.APPFLOW_CHAT_SDK.init) {
              window.APPFLOW_CHAT_SDK.init({
                integrateConfig: {
                  integrateId: 'cit-623ebc0d2f4b4279bf06',
                  draggable: true
                },
                displayConfig: {
                  zIndex: 9999,
                  position: 'right'
                },
                aiChatOptions: {
                  displayOptions: {
                    defaultMode: 'CHAT_BUBBLE',
                    autoShow: true  // 尝试自动显示
                  }
                }
              });
              
              console.log('阿里云Appflow Chat SDK初始化成功');
            } else {
              console.error('APPFLOW_CHAT_SDK.init方法不存在');
            }
            
            // 初始化后立即尝试显示聊天窗口
            setTimeout(() => {
              if (window.APPFLOW_CHAT_SDK.initChat) {
                // 尝试带参数调用initChat
                window.APPFLOW_CHAT_SDK.initChat({
                  visible: true
                });
                console.log('已调用APPFLOW_CHAT_SDK.initChat({visible: true})');
              } else {
                console.log('APPFLOW_CHAT_SDK.initChat方法不存在');
              }
            }, 1000);
          } catch (error) {
            console.error('阿里云Appflow Chat SDK初始化失败:', error);
          }
        } else {
          console.log('APPFLOW_CHAT_SDK尚未准备好，等待100ms后重试');
          setTimeout(initChatSDK, 100);
        }
      }
      
      // 页面加载完成后开始初始化
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initChatSDK);
      } else {
        // DOM已经加载完成
        initChatSDK();
      }
      
      // 页面完全加载后再次尝试显示聊天窗口
      window.addEventListener('load', function() {
        setTimeout(() => {
          if (window.APPFLOW_CHAT_SDK) {
            console.log('页面加载完成后检查APPFLOW_CHAT_SDK:', Object.keys(window.APPFLOW_CHAT_SDK));
            if (window.APPFLOW_CHAT_SDK.initChat) {
              window.APPFLOW_CHAT_SDK.initChat({
                visible: true
              });
              console.log('页面加载完成后再次调用APPFLOW_CHAT_SDK.initChat({visible: true})');
            }
          }
        }, 2000);
      });
    </script>
    <!-- 核心 SEO 元标签 -->
    <title>WE Tools - 全球优质软件与网站导航平台 | 效率工具一站式工具箱</title>
    <meta name="description" content="WE Tools 精选全球免费高效工具，涵盖办公效率、设计创意、开发编程等领域，提供软件下载与网站导航服务，助力提升您的工作流与数字生活体验。" />
    <meta name="keywords" content="效率工具,免费软件下载,网站导航,办公软件,设计工具,开发者工具,在线工具集合,WE Tools" />

    <!-- Open Graph (Facebook/LinkedIn 分享优化) -->
    <meta property="og:title" content="WE Tools - 全球优质效率工具导航平台" />
    <meta property="og:description" content="发现全球高效免费工具！WE Tools 提供办公、设计、开发领域的精选软件与网站导航，一站式提升您的工作效率。" />
    <meta property="og:image" content="https://wetools.wctw.fun/images/og-social-share.png" />
    <meta property="og:url" content="https://wetools.wctw.fun" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="WE Tools" />

    <!-- Twitter 卡片优化 -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="WE Tools - 全球优质效率工具导航平台" />
    <meta name="twitter:description" content="发现全球高效免费工具！WE Tools 提供办公、设计、开发领域的精选软件与网站导航，一站式提升您的工作效率。" />
    <meta name="twitter:image" content="https://wetools.wctw.fun/images/twitter-social-share.png" />
    <meta name="twitter:site" content="@YourTwitterHandle" /> <!-- 替换为你的 Twitter 账号 -->

    <!-- 结构化数据增强 SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "WE Tools",
      "url": "https://wetools.wctw.fun",
      "description": "全球优质效率工具导航平台，提供免费软件与实用网站的一站式发现服务。",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://wetools.wctw.fun/search?q={search_term}",
        "query-input": "required name=search_term"
      }
    }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <!-- AI助手手动触发按钮 -->
    <div id="ai-assistant-trigger" style="position: fixed; bottom: 20px; right: 20px; z-index: 10000; display: none;">
      <button id="ai-assistant-button" 
              style="background: #1464E4; color: white; border: none; border-radius: 50%; width: 60px; height: 60px; font-size: 24px; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;"
              title="打开AI助手">
        💬
      </button>
    </div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      // 页面加载完成后显示AI助手触发按钮并添加事件监听器
      window.addEventListener('load', function() {
        // 显示触发按钮
        const trigger = document.getElementById('ai-assistant-trigger');
        if (trigger) {
          trigger.style.display = 'block';
        }
        
        // 添加按钮点击事件
        const button = document.getElementById('ai-assistant-button');
        if (button) {
          button.addEventListener('click', function() {
            console.log('点击AI助手按钮');
            try {
              // 尝试显示聊天窗口
              if (window.APPFLOW_CHAT_SDK) {
                // 检查是否有initChat方法（这是最可能的显示方法）
                if (window.APPFLOW_CHAT_SDK.initChat) {
                  // 尝试带参数调用initChat
                  window.APPFLOW_CHAT_SDK.initChat({
                    visible: true
                  });
                  console.log('已调用APPFLOW_CHAT_SDK.initChat({visible: true})');
                }
                // 检查是否有show方法
                else if (window.APPFLOW_CHAT_SDK.show) {
                  window.APPFLOW_CHAT_SDK.show();
                  console.log('已调用APPFLOW_CHAT_SDK.show()');
                } 
                // 检查是否有toggle方法
                else if (window.APPFLOW_CHAT_SDK.toggle) {
                  window.APPFLOW_CHAT_SDK.toggle();
                  console.log('已调用APPFLOW_CHAT_SDK.toggle()');
                }
                // 检查是否有open方法
                else if (window.APPFLOW_CHAT_SDK.open) {
                  window.APPFLOW_CHAT_SDK.open();
                  console.log('已调用APPFLOW_CHAT_SDK.open()');
                }
                // 检查是否有launch方法
                else if (window.APPFLOW_CHAT_SDK.launch) {
                  window.APPFLOW_CHAT_SDK.launch();
                  console.log('已调用APPFLOW_CHAT_SDK.launch()');
                }
                // 检查是否有llmInit方法
                else if (window.APPFLOW_CHAT_SDK.llmInit) {
                  window.APPFLOW_CHAT_SDK.llmInit();
                  console.log('已调用APPFLOW_CHAT_SDK.llmInit()');
                }
                else {
                  console.log('APPFLOW_CHAT_SDK没有可用的显示方法');
                  console.log('APPFLOW_CHAT_SDK对象:', window.APPFLOW_CHAT_SDK);
                }
                
                // 检查DOM中是否存在AI助手元素
                setTimeout(() => {
                  const chatElements = document.querySelectorAll('[id*="appflow"], [class*="appflow"], [id*="chatbot"], [class*="chatbot"]');
                  console.log('找到的AI助手相关元素:', chatElements.length);
                  if (chatElements.length > 0) {
                    console.log('AI助手元素列表:');
                    chatElements.forEach((el, index) => {
                      console.log(`${index}:`, el);
                    });
                  }
                }, 1000);
              } else {
                console.log('APPFLOW_CHAT_SDK未定义');
              }
            } catch (error) {
              console.error('显示AI助手时出错:', error);
            }
          });
        }
      });
    </script>

    <!-- 可选: 百度统计/Google Analytics 代码 -->
    <!-- <script>
      // 在此插入统计代码
    </script> -->
  </body>
</html>